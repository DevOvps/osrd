/**
 * Fonctions utiles pour les cartes des différents projets
 */


/**
 * Donne le bon type de curseur au survol
 * @param {boolean} isHovering - S'il est à True, retourne le bon type de pointeur
 * @returns {string} La classe correspondant au pointeur
 */
export function getCursor(isHovering) {
  return isHovering ? 'pointer' : 'default';
}

/**
 * Donne la valeur arrondie d'une coordonnée GPS
 * @param {number} val - La valeur à arrondir
 * @returns {number} La coordonnée arrondie au 10 000ème
 */
export function gpsRound(val) {
  return Math.round(val * 10000) / 10000;
}

/**
 * Fonction de callback lors d'un requête vers une URL extérieure
 * @param {string} url - L'URL de la requête
 * @param {string} resourceType - Le type de ressource
 * @param {string} urlmap - L'URL de base pour la carte
 * @returns {(object| null)} Le token d'authentifcation lorsqu'il est nécessaire
 */
export function transformRequest(url, resourceType, urlmap) {
  if ((resourceType === 'Source' || resourceType === 'Tile') && url.startsWith(urlmap)) {
    return {
      url,
      headers: { Authorization: `JWT ${localStorage.getItem('access_token')}` },
    };
  }
  return null;
}
